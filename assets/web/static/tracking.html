<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="refresh" content="5">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <link rel="stylesheet" href="styles.css">
  <title>Chrony</title>
</head>

<body>
  <div class="container mt-5">
    <h1>Tracking Info</h1>
    <div class="card mt-3 mr-3 ml-3" id="info"></div>
  </div>

  <script>
    const p = document.getElementById('info');
    const myRequest = new Request("/api/chrony/tracking");

    const table = document.createElement("table");
    table.setAttribute("class", "table table-striped table-hover")
    const thead = document.createElement("thead");

    const tbody = document.createElement("tbody");


    fetch(myRequest)
      .then((response) => response.json())
      .then((info) => {
        //console.log(info)
        for (const kv of info.info) {
          const tr = document.createElement("tr")
          const tdk = document.createElement("td")
          const tdv = document.createElement("td")

          tdk.innerHTML = kv.key
          tdv.innerHTML = kv.value

          tr.appendChild(tdk)
          tr.appendChild(tdv)
          tbody.appendChild(tr)

          //console.log(kv.key, " - ", kv.value)
        }

        table.appendChild(thead)
        table.appendChild(tbody)
        p.appendChild(table)
      })
      .catch(console.error);
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
    crossorigin="anonymous"></script>
</body>

</html>